{% extends "baseMed.html" %}
{% load static %}


{% block content %}
    <h1>Consultas</h1>

    <div class="container">
           {% if medico_encontrado %}
        <p>Exibindo consultas para o médico: <strong>{{ primeiro_medico.user.get_full_name|default:primeiro_medico.user.username }}</strong> (CRM: {{ primeiro_medico.crm }})</p>

        {% if consultas %}
            <table>
                <thead>
                    <tr>
                        <th>Data e Hora</th>
                        <th>Paciente</th>
                        <th>Serviço</th>
                        <th>Sala</th>
                        <th>Valor</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for consulta in consultas %}
                    <tr>
                        <td>{{ consulta.data|date:"d/m/Y H:i" }}</td>
                        <td>{{ consulta.paciente.user.get_full_name|default:consulta.paciente.user.username }}</td>
                        <td>{{ consulta.get_servico_display }}</td>
                        <td>{{ consulta.sala }}</td>
                        <td>R$ {{ consulta.valor|floatformat:2 }}</td>
                        <td>{{ consulta.get_status_display }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>O médico **{{ primeiro_medico.user.username }}** não possui consultas agendadas.</p>
        {% endif %}
    {% else %}
        <p>Nenhum médico encontrado no banco de dados.</p>
    {% endif %}
    </div>

{% endblock content %}

{% block extra_scripts %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}