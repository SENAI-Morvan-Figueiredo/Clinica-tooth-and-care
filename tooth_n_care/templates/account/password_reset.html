{% extends "baseCadastro.html" %}
{% load i18n allauth account %}
{% load widget_tweaks %}

{# O bloco head_title será 'Redefinir Senha' #}
{% block title %}{% trans "Redefinir Senha" %}{% endblock %}

{% block content %}
<div class="container d-flex flex-column align-items-center justify-content-center h-100 w-100">
    <div class="text-center w-100 mb-4">
        <h2 class="card-title mb-2">{% trans "Redefinir Senha" %}</h2>
        <p class="text-muted">
            {% trans "Informe seu e-mail para receber o link de redefinição." %}
        </p>
    </div>

    {% if user.is_authenticated %}
    {% include "account/snippets/already_logged_in.html" %}
    {% endif %}

    <form method="POST" action="{% url 'account_reset_password' %}" class="password_reset w-75">
        {% csrf_token %}

        {% for field in form %}
        <div class="mb-3">
            <label for="{{ field.id_for_label }}" class="form-label visually-hidden">{{ field.label }}</label>
            {{ field|attr:"class:form-control"|attr:"placeholder:Endereço de E-mail" }}
            
            {# Se você não estiver usando crispy-forms, esta é a forma de adicionar a classe form-control. #}
            {# Se estiver usando, remova a parte |attr:... e adicione o {{ field.as_widget class="form-control" }} #}
            
            {% for error in field.errors %}
            <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
        </div>
        {% endfor %}

        <button class="btn btn-primary btn-lg w-100 mt-3" type="submit">
            {% trans "Enviar Link de Reset" %}
        </button>
    </form>
    
    <div class="mt-3 text-center">
        <a href="{% url 'account_login' %}" class="text-decoration-none">
            {% trans "Lembrou da senha? Voltar ao login" %}
        </a>
    </div>

</div>
{% endblock %}