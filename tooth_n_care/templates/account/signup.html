{% extends 'baseCadastro.html' %}
{% load static %}
{% load widget_tweaks %} 

{% block content %}
<div class="w-100">
    <h1 class="text-center mb-4">Cadastro</h1>

    <form id="signup_form" method="post" action="{% url 'account_signup' %}" novalidate class="w-100" >
        {% csrf_token %}

        {% for field in form %}

        <div class="mb-3">
            <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
            
            {% if field.name == "data_nasc" %}
            <div class="d-flex gap-2">
                {{ field }}
            </div>
            {% else %}
            {{ field }}
            {% endif %}

            {% if field.help_text %}
            <div class="form-text">{{ field.help_text }}</div>
            {% endif %}

            {% for error in field.errors %}
            <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
        </div>
        {% endfor %}

        <button type="submit" class="btn btn-primary w-100 mt-3">Cadastrar</button>
    </form>
</div>
{% endblock %}

{% block extra_scripts %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let form = document.getElementById('signup_form');
            if (form) {
                form.addEventListener('submit', function() {
                    let submitButton = form.querySelector('button[type="submit"]');

                    if (submitButton) {
                        submitButton.disabled = true;

                        submitButton.textContent = 'Enviando...';
                    }
                });
            }
        });
    </script>
{% endblock %}